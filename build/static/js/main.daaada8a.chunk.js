(this.webpackJsonpsimulador_horarios=this.webpackJsonpsimulador_horarios||[]).push([[0],{40:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(14),s=n.n(a),i=(n(40),n(13)),u=n.n(i);var o=n(34),d=n(21),j=n(35),b=n(31),l=n(16),p=n(9),O=n.n(p),f=n(11),h=n(6),x=n(5),m=n(32),v=n.n(m),y={base:function(){return"https://api.horarios.bitsys.tech/get?url="},departments:function(){return y.base()+"/departments"},departmentSubjects:function(e){return y.base()+"/department/"+e},subject:function(e){return y.base()+"/class/"+e},subjectShifts:function(e){return y.base()+"/class/i/"+e+"/shifts"}},g=y;function S(e){return u.a.get(g.departmentSubjects(e))}function w(e){return u.a.get(g.subject(e))}function k(e){return u.a.get(g.subjectShifts(e))}var T=O.a.mark(V),R="[Redux] Init",C="[Redux] SetTime",F="[Redux] GetDepartments",P="[Redux] SetDepartments",_="[Redux] SetDepartment",D="[Redux] SetSubjects",I="[Redux] AddSubject",A="[Redux] AddSubjectDone",E="[Redux] RemoveSubject",M="[Redux] AddShifts",B={time:{all:[{year:2021,times:[{id:1,name:"1\xba Semestre"},{id:2,name:"Trimestre"},{id:3,name:"2\xba Semestre"}]}],chosen:"2021-3"},department:{all:[],chosen:void 0},subject:{all:[],chosen:{}},shifts:{}},L=Object(l.a)({storage:v.a,key:"simulador-horarios"},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:var n=Object(x.a)({},e);n.time=Object(x.a)(Object(x.a)({},e.time),{},{chosen:t.payload});case P:var r=Object(x.a)({},e);return r.department=Object(x.a)(Object(x.a)({},e.department),{},{all:t.payload}),r;case _:var c=Object(x.a)({},e);return c.department=Object(x.a)(Object(x.a)({},e.department),{},{chosen:t.payload}),c;case D:var a=Object(x.a)({},e);return a.subject=Object(x.a)(Object(x.a)({},e.subject),{},{all:t.payload}),a;case A:var s=Object(x.a)({},e),i=Object(x.a)({},e.subject.chosen);return i[t.payload.id]=t.payload,s.subject=Object(x.a)(Object(x.a)({},e.subject),{},{chosen:Object(x.a)({},i)}),s;case E:var u=Object(x.a)({},e),o=Object(x.a)({},e.subject.chosen);delete o[t.payload],u.subject=Object(x.a)(Object(x.a)({},e.subject),{},{chosen:Object(x.a)({},o)});var d=Object(x.a)({},e.shifts);return delete d[t.payload],u.shifts=Object(x.a)({},d),u;case M:var j=Object(x.a)({},e);return j.shifts=Object(x.a)({},e.shifts),j.shifts[t.payload.subject]=t.payload.shifts,j;default:return e}})),H=function(){return{type:R}},J=function(e){return{type:C,payload:e}},N=function(){return{type:F}},z=function(e){return{type:P,payload:e}},G=function(e){return{type:_,payload:e}},X=function(e){return{type:D,payload:e}},q=function(e){return{type:I,payload:e}},K=function(e){return{type:A,payload:e}},Q=function(e){return{type:E,payload:e}},U=function(e,t){return{type:M,payload:{subject:e,shifts:t}}};function V(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)(R,O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(N());case 2:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Object(f.d)(F,O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get(g.departments());case 2:return t=e.sent,n=t.data,e.next=6,Object(f.b)(z(n));case 6:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Object(f.d)(_,O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,e.next=3,S(n);case 3:return r=e.sent,c=r.data,e.next=7,Object(f.b)(X(c.classes));case 7:case"end":return e.stop()}}),e)})));case 6:return e.next=8,Object(f.d)(I,O.a.mark((function e(t){var n,r,c,a,s,i,u,o,d,j,b,l,p,h,x;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.payload)>0)){e.next=27;break}return e.next=4,w(n);case 4:return r=e.sent,c=r.data,a=c,s=c.instances,e.next=10,Object(f.c)((function(e){return e.redux}));case 10:for(i=e.sent,u=i.time.chosen,o=u.split("-"),d=o[0],j=o[1],b=!1,l=void 0,p=0;!b&&p<s.length;p++)s[p].year==d&&s[p].period==j&&(l=s[p].id,b=!0);if(!l){e.next=27;break}return e.next=21,Object(f.b)(K(a));case 21:return e.next=23,k(l);case 23:return h=e.sent,x=h.data,e.next=27,Object(f.b)(U(n,x));case 27:case"end":return e.stop()}}),e)})));case 8:case"end":return e.stop()}}),T)}var W=O.a.mark(Z),Y=Object(h.c)({redux:L});function Z(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([V()]);case 2:case"end":return e.stop()}}),W)}var $=Object(j.a)(),ee=[].concat(Object(o.a)(Object(d.b)({immutableCheck:!1,serializableCheck:!1,thunk:!0})),[$]),te=Object(d.a)({reducer:Y,middleware:ee,devTools:!1,enhancers:[b.reduxBatch]}),ne=Object(l.b)(te);$.run(Z);var re=te,ce=n(7),ae=n(33),se=(n(70),n(71),n(1)),ie=function(e){var t=e.name,n=e.logo,r=e.times,c=e.time,a=e.departments,s=e.department,i=e.subjects,u=e.subject,o=Object(ce.b)(),d=Object.values(u).sort((function(e,t){return e.abbreviation>t.abbreviation}));return Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)("div",{id:"topMenu",children:[Object(se.jsxs)("span",{children:[Object(se.jsx)("img",{src:n}),Object(se.jsx)("h1",{children:t})]}),Object(se.jsxs)("span",{children:[Object(se.jsxs)("select",{value:c,onChange:function(e){return function(e){o(J(e))}(e.target.value)},children:[Object(se.jsx)("option",{disabled:!0,selected:!0,children:"Escolher Per\xedodo Letivo"}),r.map((function(e){return Object(se.jsx)("optgroup",{label:e.year,children:e.times.map((function(t){return Object(se.jsx)("option",{value:e.year+"-"+t.id,children:t.name})}))})}))]}),Object(se.jsxs)("select",{value:s,onChange:function(e){return function(e){o(G(e))}(e.target.value)},children:[Object(se.jsx)("option",{disabled:!0,selected:!0,children:"Escolher Departamento"}),a.map((function(e){return Object(se.jsx)("option",{value:e.id,children:e.name})}))]}),Object(se.jsxs)("select",{onChange:function(e){return function(e){o(q(e))}(e.target.value)},children:[Object(se.jsx)("option",{value:-1,selected:!0,children:"Adicionar Cadeira"}),i.map((function(e){return u[e.id]?Object(se.jsx)(se.Fragment,{}):Object(se.jsx)("option",{value:e.id,children:e.name})}))]})]})]}),Object(se.jsx)("div",{id:"subTopMenu",children:d.map((function(e){return Object(se.jsxs)("div",{title:e.name,children:[e.abbreviation,Object(se.jsx)("span",{onClick:function(){return function(e){o(Q(e))}(e.id)},children:"X"})]})}))})]})},ue={name:"Simulador de Hor\xe1rios",logo:"./logo.png"},oe=function(){var e=Object(ce.c)((function(e){return e.redux.time.all})),t=Object(ce.c)((function(e){return e.redux.time.chosen})),n=Object(ce.c)((function(e){return e.redux.department.all})),r=Object(ce.c)((function(e){return e.redux.department.chosen})),c=Object(ce.c)((function(e){return e.redux.subject.all})),a=Object(ce.c)((function(e){return e.redux.subject.chosen}));return Object(se.jsx)(ie,{name:ue.name,logo:ue.logo,times:e,time:t,departments:n,department:r,subjects:c,subject:a})},de=(n(73),function(e){for(var t=e.shifts,n=e.subjects,r=[],c=8;c<=23.5;c+=.5)r.push(60*c);var a=[],s=[];r.map((function(){var e=[],t=[];[1,2,3,4,5].map((function(){e.push([]),t.push(0)})),a.push(e),s.push(t)}));var i=[1,1,1,1,1];return Object.keys(t).map((function(e){t[e].map((function(t){t.instances.map((function(c){a[r.indexOf(c.start)][c.weekday].push({id:t.id,subject:{short:n[e].abbreviation,name:n[e].name},number:t.number,type:{name:t.type_display.indexOf("Te\xf3rico-Pr\xe1tico")>=0?"TP":t.type_display.indexOf("Te\xf3rico")>=0?"T":"P",title:t.type_display},class:t.type_display.indexOf("Te\xf3rico-Pr\xe1tico")>=0?"tp":t.type_display.indexOf("Te\xf3rico")>=0?"t":"p",duration:c.duration/30,room:c.room?c.room:"-"});for(var u=r.indexOf(c.start);u<r.indexOf(c.start)+c.duration/30;u++)s[u][c.weekday]++;i[c.weekday]=Math.max(i[c.weekday],a[r.indexOf(c.start)][c.weekday].length)}))}))})),console.log(a),console.log(i),Object(se.jsx)(se.Fragment,{children:Object(se.jsxs)("table",{className:"timetable",children:[Object(se.jsxs)("thead",{children:[Object(se.jsx)("th",{children:"Hora"}),Object(se.jsx)("th",{colSpan:i[0],children:"2\xaa"}),Object(se.jsx)("th",{colSpan:i[1],children:"3\xaa"}),Object(se.jsx)("th",{colSpan:i[2],children:"4\xaa"}),Object(se.jsx)("th",{colSpan:i[3],children:"5\xaa"}),Object(se.jsx)("th",{colSpan:i[4],children:"6\xaa"})]}),Object(se.jsx)("tbody",{children:r.map((function(e){return Object(se.jsxs)("tr",{children:[Object(se.jsxs)("td",{children:[parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60),":",(e/60).toString().indexOf(".5")>0?"30":"00"]}),[0,1,2,3,4].map((function(t){return Object(se.jsxs)(se.Fragment,{children:[s[r.indexOf(e)][t]?a[r.indexOf(e)][t].sort((function(e,t){return e.subject.short!=t.subject.short?e.subject.short>t.subject.short:e.number>t.number})).map((function(e){return Object(se.jsxs)("td",{rowSpan:e.duration,className:"class ".concat(e.class),children:[Object(se.jsx)("h3",{title:e.subject.name,children:e.subject.short}),Object(se.jsxs)("p",{children:[Object(se.jsxs)("span",{title:e.type.title+" "+e.number,children:[e.type.name," ",e.number]}),Object(se.jsx)("br",{}),e.room]})]})})):Object(se.jsx)("td",{colSpan:i[t]-s[r.indexOf(e)][t]}),i[t]>s[r.indexOf(e)][t]&&s[r.indexOf(e)][t]?Object(se.jsx)("td",{colSpan:i[t]-s[r.indexOf(e)][t]}):Object(se.jsx)(se.Fragment,{})]})}))]})}))})]})})}),je=function(){var e=Object(ce.c)((function(e){return e.redux.shifts})),t=Object(ce.c)((function(e){return e.redux.subject.chosen}));return Object(se.jsx)("div",{children:Object(se.jsx)(de,{shifts:e,subjects:t})})},be=function(){var e=Object(ce.b)();return Object(r.useEffect)((function(){e(H())}),[]),Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(oe,{}),Object(se.jsx)(je,{})]})};n(74);var le=function(){return u.a,Object(se.jsx)(ce.a,{store:re,children:Object(se.jsx)(ae.a,{persistor:ne,loading:null,children:Object(se.jsx)(be,{})})})},pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(se.jsx)(c.a.StrictMode,{children:Object(se.jsx)(le,{})}),document.getElementById("root")),pe()}},[[75,1,2]]]);
//# sourceMappingURL=main.daaada8a.chunk.js.map