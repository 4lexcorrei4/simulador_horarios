(this.webpackJsonpsimulador_horarios=this.webpackJsonpsimulador_horarios||[]).push([[0],{41:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(14),s=n.n(c),i=(n(41),n(13)),u=n.n(i);var o=n(35),d=n(22),b=n(36),j=n(32),l=n(16),p=n(8),f=n.n(p),h=n(7),O=n(6),x=n(5),m=n(33),v=n.n(m),y={base:function(){return"https://api.horarios.bitsys.tech/get?url="},departments:function(){return y.base()+"/departments"},departmentSubjects:function(e){return y.base()+"/department/"+e},subject:function(e){return y.base()+"/class/"+e},subjectShifts:function(e){return y.base()+"/class/i/"+e+"/shifts"}},g=y;function w(e){return u.a.get(g.departmentSubjects(e))}function k(e){return u.a.get(g.subject(e))}function S(e){return u.a.get(g.subjectShifts(e))}var C=f.a.mark(ee),R="[Redux] Init",F="[Redux] SetYears",A="[Redux] ChangeYear",D="[Redux] GetDepartments",I="[Redux] SetDepartments",L="[Redux] SetDepartment",T="[Redux] GetDepartmentSubjects",M="[Redux] SetSubjects",_="[Redux] AddOrUpdateSubjects",N="[Redux] AddSubjectDone",P="[Redux] RemoveSubject",Y="[Redux] AddOrUpdateShifts",E="[Redux] Nothing",B={year:{all:[],chosen:void 0},department:{all:[],chosen:void 0},subject:{all:[],chosen:{}},shifts:{},loading:!0},z=Object(l.a)({storage:v.a,key:"simulador-horarios"},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var n=Object(x.a)({},e);return n.year=t.payload,n;case A:var r=Object(x.a)({},e);return r.year.chosen=t.payload,r;case D:var a=Object(x.a)({},e);return a.loading=!0,a;case I:var c=Object(x.a)({},e);return c.department=Object(x.a)(Object(x.a)({},e.department),{},{all:t.payload}),c.loading=!1,c;case L:var s=Object(x.a)({},e);return s.department=Object(x.a)(Object(x.a)({},e.department),{},{chosen:t.payload}),s;case T:var i=Object(x.a)({},e);return i.loading=!0,i;case M:var u=Object(x.a)({},e);return u.subject=Object(x.a)(Object(x.a)({},e.subject),{},{all:t.payload}),u.loading=!1,u;case _:var o=Object(x.a)({},e);return o.loading=!0,o;case N:var d=Object(x.a)({},e),b=Object(x.a)({},e.subject.chosen);return b[t.payload.id]=t.payload,d.subject=Object(x.a)(Object(x.a)({},e.subject),{},{chosen:Object(x.a)({},b)}),d;case P:var j=Object(x.a)({},e),l=Object(x.a)({},e.subject.chosen);delete l[t.payload],j.subject=Object(x.a)(Object(x.a)({},e.subject),{},{chosen:Object(x.a)({},l)});var p=Object(x.a)({},e.shifts);return delete p[t.payload],j.shifts=Object(x.a)({},p),j;case Y:var f=Object(x.a)({},e);return f.shifts=Object(x.a)({},e.shifts),f.shifts[t.payload.subject]=t.payload.shifts,f;default:var h=Object(x.a)({},e);return h.loading=!1,h}})),G=function(){return{type:R}},H=function(e){return{type:F,payload:e}},J=function(e){return{type:A,payload:e}},U=function(){return{type:D}},X=function(e){return{type:I,payload:e}},q=function(e){return{type:L,payload:e}},K=function(e){return{type:M,payload:e}},Q=function(e){return{type:_,payload:e}},V=function(e){return{type:N,payload:e}},W=function(e){return{type:P,payload:e}},Z=function(e,t){return{type:Y,payload:{subject:e,shifts:t}}},$=function(){return{type:E}};function ee(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)(R,f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={all:[],chosen:(new Date).getMonth()>=9?(new Date).getFullYear()+1:(new Date).getFullYear()},n=t.chosen;n>=2015;n--)t.all.push(n);return e.next=4,Object(h.b)(H(t));case 4:return e.next=6,Object(h.b)(U());case 6:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Object(h.d)(D,f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get(g.departments());case 2:return t=e.sent,n=t.data,e.next=6,Object(h.b)(X(n));case 6:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Object(h.d)(L,f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,e.next=3,w(n);case 3:return r=e.sent,a=r.data,e.next=7,Object(h.b)(K(a.classes));case 7:case"end":return e.stop()}}),e)})));case 6:return e.next=8,Object(h.d)(A,f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,e.next=3,Object(h.c)((function(e){return e.redux.subject.chosen}));case 3:return n=e.sent,e.next=6,Object(h.b)(Q(Object.keys(n)));case 6:case"end":return e.stop()}}),e)})));case 8:return e.next=10,Object(h.d)(_,f.a.mark((function e(t){var n,r,a,c,s,i,u,o,d,b,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=0,0;case 3:if(!((a=Array.isArray(n)?n[r++]:n)>0)){e.next=23;break}return e.next=7,k(a);case 7:return c=e.sent,s=c.data,i=s,u=s.instances,e.next=13,Object(h.c)((function(e){return e.redux.time.chosen}));case 13:for(o=e.sent,d=!1,b=void 0,j=0;!d&&j<u.length;j++)u[j].year==o&&(b=u[j].id,d=!0);if(!b){e.next=21;break}return e.delegateYield(f.a.mark((function e(){var t,n,r,c,s,u,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(V(i));case 2:return(t=Object(x.a)({},i)).credits=t.credits/2,delete t.instances,delete t.url,e.next=8,S(b);case 8:return n=e.sent,r=n.data,c=r,s={t:{},to:{},tp:{},tpo:{},p:{},po:{}},e.next=14,w(t.department.id);case 14:return u=e.sent,o=u.data.building.abbreviation,c.map((function(e){var n=Object(x.a)({},e);delete n.teachers,delete n.url;for(var r=0;r<n.instances.length;r++)n.instances[r].duration=n.instances[r].duration/30,n.instances[r].room=n.instances[r].room?o+" "+n.instances[r].room:void 0;var a=e.type_display.indexOf("Te\xf3rico-Pr\xe1tico")>=0?"TP":e.type_display.indexOf("Te\xf3rico")>=0?"T":"P";e.type_display.indexOf("Online")>=0&&(a+="O"),n.type={name:a,title:e.type_display},delete n.type_display,s[a.toLowerCase()][e.number]={subject:t,shift:n}})),e.next=19,Object(h.b)(Z(a,s));case 19:0;case 20:case"end":return e.stop()}}),e)}))(),"t0",19);case 19:e.next=23;break;case 21:return e.next=23,Object(h.b)(W(a));case 23:if(Array.isArray(n)&&r<=n.length){e.next=3;break}case 24:return e.next=26,Object(h.b)($());case 26:case"end":return e.stop()}}),e)})));case 10:case"end":return e.stop()}}),C)}var te=f.a.mark(re),ne=Object(O.c)({redux:z});function re(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)([ee()]);case 2:case"end":return e.stop()}}),te)}var ae=Object(b.a)(),ce=[].concat(Object(o.a)(Object(d.b)({immutableCheck:!1,serializableCheck:!1,thunk:!0})),[ae]),se=Object(d.a)({reducer:ne,middleware:ce,devTools:!1,enhancers:[j.reduxBatch]}),ie=Object(l.b)(se);ae.run(re);var ue=se,oe=n(9),de=n(34),be=(n(71),n(72),n(1)),je=function(e){var t=e.name,n=e.logo,r=e.years,a=e.year,c=e.departments,s=e.department,i=e.subjects,u=e.subject,o=Object(oe.b)(),d=function(e){o(J(e))},b=Object.values(u).sort((function(e,t){return e.abbreviation>t.abbreviation}));return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)("div",{id:"topMenu",children:[Object(be.jsxs)("span",{children:[Object(be.jsx)("img",{src:n}),Object(be.jsx)("h1",{children:t})]}),Object(be.jsxs)("span",{children:[Object(be.jsxs)("select",{value:a,onChange:function(e){return d(e.target.value)},children:[Object(be.jsx)("option",{disabled:!0,selected:!0,children:"Escolher Ano Letivo"}),r.map((function(e){return Object(be.jsx)("option",{value:e,children:e})}))]}),Object(be.jsxs)("select",{value:s,onChange:function(e){return function(e){o(q(e))}(e.target.value)},children:[Object(be.jsx)("option",{disabled:!0,selected:!0,children:"Escolher Departamento"}),c.map((function(e){return Object(be.jsx)("option",{value:e.id,children:e.name})}))]}),Object(be.jsxs)("select",{onChange:function(e){return function(e){o(Q(e))}(e.target.value)},children:[Object(be.jsx)("option",{value:-1,selected:!0,children:"Adicionar Cadeira"}),i.map((function(e){return u[e.id]?Object(be.jsx)(be.Fragment,{}):Object(be.jsx)("option",{value:e.id,children:e.name})}))]})]})]}),Object(be.jsxs)("div",{id:"subTopMenu",children:[Object(be.jsx)("div",{id:"subjects",children:b.map((function(e){return Object(be.jsxs)("div",{title:e.name,children:[e.abbreviation,Object(be.jsx)("span",{onClick:function(){return function(e){o(W(e))}(e.id)},children:"X"})]})}))}),Object(be.jsx)("div",{id:"update",onClick:function(){return d(a)},children:"\u21ba Atualizar"})]})]})},le={name:"Simulador de Hor\xe1rios",logo:"./logo.png"},pe=function(){var e=Object(oe.c)((function(e){return e.redux.year.all})),t=Object(oe.c)((function(e){return e.redux.year.chosen})),n=Object(oe.c)((function(e){return e.redux.department.all})),r=Object(oe.c)((function(e){return e.redux.department.chosen})),a=Object(oe.c)((function(e){return e.redux.subject.all})),c=Object(oe.c)((function(e){return e.redux.subject.chosen}));return Object(be.jsx)(je,{name:le.name,logo:le.logo,years:e,year:t,departments:n,department:r,subjects:a,subject:c})},fe=(n(74),n(21)),he=n.n(fe),Oe=function(e){var t=e.maxClasses,n=e.hours,r=e.classes,a=e.filled;return Object(be.jsx)(be.Fragment,{children:Object(be.jsxs)("table",{className:"timetable",children:[Object(be.jsx)("thead",{children:Object(be.jsxs)("tr",{children:[Object(be.jsx)("th",{children:"Hora"}),Object(be.jsx)("th",{colSpan:t[0],children:"2\xaa"}),Object(be.jsx)("th",{colSpan:t[1],children:"3\xaa"}),Object(be.jsx)("th",{colSpan:t[2],children:"4\xaa"}),Object(be.jsx)("th",{colSpan:t[3],children:"5\xaa"}),Object(be.jsx)("th",{colSpan:t[4],children:"6\xaa"})]})}),Object(be.jsx)("tbody",{children:n.map((function(e){return Object(be.jsxs)("tr",{children:[Object(be.jsxs)("td",{children:[-1==(e/60).toString().indexOf(".5")?parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60):parseInt(e/60)+1<10?"0"+(parseInt(e/60)+1):parseInt(e/60)+1,":00"]}),[0,1,2,3,4].map((function(c){return Object(be.jsxs)(be.Fragment,{children:[a[n.indexOf(e)][c]?r[n.indexOf(e)][c].sort((function(e,t){return e.subject.abbreviation!=t.subject.abbreviation?e.subject.abbreviation>t.subject.abbreviation:e.shift.number>t.shift.number})).map((function(e){return Object(be.jsxs)("td",{rowSpan:e.shift.duration,className:"class ".concat(e.shift.type.name.toLowerCase()," ").concat(e.subject.id,"-").concat(e.shift.type.name.toLowerCase(),"-").concat(e.shift.number),onMouseOver:function(){return t=e.subject.id+"-"+e.shift.type.name.toLowerCase()+"-"+e.shift.number,void he()("."+t).addClass("hover");var t},onMouseLeave:function(){return t=e.subject.id+"-"+e.shift.type.name.toLowerCase()+"-"+e.shift.number,void he()("."+t).removeClass("hover");var t},children:[Object(be.jsx)("h3",{children:Object(be.jsx)("span",{title:e.subject.name,children:e.subject.abbreviation})}),Object(be.jsxs)("p",{children:[Object(be.jsxs)("span",{title:e.shift.type.title+" "+e.shift.number,children:[e.shift.type.name," ",e.shift.number]}),Object(be.jsx)("br",{}),e.shift.room]})]})})):Object(be.jsx)("td",{colSpan:t[c]-a[n.indexOf(e)][c]}),t[c]>a[n.indexOf(e)][c]&&a[n.indexOf(e)][c]?Object(be.jsx)("td",{colSpan:t[c]-a[n.indexOf(e)][c]}):Object(be.jsx)(be.Fragment,{})]})}))]})}))})]})})},xe=function(){for(var e=Object(oe.c)((function(e){return e.redux.shifts})),t=[],n=8;n<=23.5;n+=.5)t.push(60*n);var r=[],a=[];t.map((function(){var e=[],t=[];[1,2,3,4,5].map((function(){e.push([]),t.push(0)})),r.push(e),a.push(t)}));var c=[1,1,1,1,1];return Object.keys(e).map((function(n){Object.keys(e[n]).map((function(s){Object.keys(e[n][s]).map((function(i){var u=e[n][s][i];u.shift.instances.map((function(e){r[t.indexOf(e.start)][e.weekday].push({subject:u.subject,shift:Object(x.a)(Object(x.a)({},e),{},{number:u.shift.number,type:u.shift.type})});for(var n=t.indexOf(e.start);n<t.indexOf(e.start)+e.duration;n++)a[n][e.weekday]++,c[e.weekday]=Math.max(c[e.weekday],a[n][e.weekday])}))}))}))})),Object(be.jsx)("div",{id:"content",children:Object(be.jsx)(Oe,{maxClasses:c,hours:t,classes:r,filled:a})})},me=(n(75),function(){return Object(be.jsx)("div",{className:"loaderContainer",children:Object(be.jsx)("div",{className:"loader"})})}),ve=function(){var e=Object(oe.b)(),t=Object(oe.c)((function(e){return e.redux.loading}));return Object(r.useEffect)((function(){e(G())}),[]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(pe,{}),Object(be.jsx)(xe,{}),t?Object(be.jsx)(me,{}):Object(be.jsx)(be.Fragment,{})]})};n(76);var ye=function(){return u.a,Object(be.jsx)(oe.a,{store:ue,children:Object(be.jsx)(de.a,{persistor:ie,loading:null,children:Object(be.jsx)(ve,{})})})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(be.jsx)(a.a.StrictMode,{children:Object(be.jsx)(ye,{})}),document.getElementById("root")),ge()}},[[77,1,2]]]);
//# sourceMappingURL=main.969c19d2.chunk.js.map