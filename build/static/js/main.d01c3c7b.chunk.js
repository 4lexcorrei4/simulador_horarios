(this.webpackJsonpsimulador_horarios=this.webpackJsonpsimulador_horarios||[]).push([[0],{52:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(21),s=n.n(c),i=(n(52),n(18)),u=n.n(i);var o=n(46),d=n(32),b=n(47),j=n(43),l=n(24),p=n(11),h=n.n(p),f=n(7),O=n(10),x=n(4),m=n(44),v=n.n(m),y={base:function(){return"https://api.horarios.bitsys.tech/get?url="},departments:function(){return y.base()+"/departments"},departmentSubjects:function(e){return y.base()+"/department/"+e},departmentSubjectsByYear:function(e,t){return y.base()+"/department/"+e+"/class_instances?year="+t},subject:function(e){return y.base()+"/class/"+e},subjectShifts:function(e){return y.base()+"/class/i/"+e+"/shifts"}},g=y;function w(e){return u.a.get(g.departmentSubjects(e))}function k(e,t){return u.a.get(g.departmentSubjectsByYear(e,t))}function S(e){return u.a.get(g.subject(e))}function C(e){return u.a.get(g.subjectShifts(e))}var R={name:"Simulador de Hor\xe1rios",logo:"./logo.png",classesTypes:function(e){switch(e){case 1:return"t";case 2:return"p";case 3:return"tp";case 4:return"s";case 5:return"ot";case 6:return"tc";case 7:return"to";case 8:return"po";case 9:return"tpo"}}},N=h.a.mark(de),A="[Redux] Init",F="[Redux] Set",_="[Redux] SetYears",D="[Redux] ChangeYear",I="[Redux] GetDepartments",T="[Redux] SetDepartments",E="[Redux] SetDepartment",L="[Redux] GetDepartmentSubjects",M="[Redux] SetSubjects",P="[Redux] AddOrUpdateSubjects",q="[Redux] AddSubjectDone",Y="[Redux] RemoveSubject",B="[Redux] AddOrUpdateShifts",G="[Redux] SaveClass",U="[Redux] RemoveClass",z="[Redux] SetView",H="[Redux] Nothing",V={view:void 0,year:{all:[],chosen:void 0},department:{all:[],chosen:void 0},subject:{all:[],chosen:{}},shifts:{},classes:{},loading:!0},J=Object(l.a)({storage:v.a,key:"simuladorHorarios-redux"},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var n=Object(x.a)({},e);return n[t.payload.name]=t.payload.content,n;case _:var r=Object(x.a)({},e);return r.year=t.payload,r;case D:var a=Object(x.a)({},e);return a.year.chosen=t.payload,a;case I:var c=Object(x.a)({},e);return c.loading=!0,c;case T:var s=Object(x.a)({},e);return s.department=Object(x.a)(Object(x.a)({},e.department),{},{all:t.payload}),s.loading=!1,s;case E:var i=Object(x.a)({},e);return i.department=Object(x.a)(Object(x.a)({},e.department),{},{chosen:t.payload}),i;case L:var u=Object(x.a)({},e);return u.loading=!0,u;case M:var o=Object(x.a)({},e);return o.subject=Object(x.a)(Object(x.a)({},e.subject),{},{all:t.payload}),o.loading=!1,o;case P:var d=Object(x.a)({},e);return d.loading=!0,d;case q:var b=Object(x.a)({},e),j=Object(x.a)({},e.subject.chosen);return j[t.payload.id]=t.payload,b.subject=Object(x.a)(Object(x.a)({},e.subject),{},{chosen:Object(x.a)({},j)}),b;case Y:var l=Object(x.a)({},e),p=Object(x.a)({},e.subject.chosen);delete p[t.payload],l.subject=Object(x.a)(Object(x.a)({},e.subject),{},{chosen:Object(x.a)({},p)});var h=Object(x.a)({},e.shifts);return delete h[t.payload],l.shifts=Object(x.a)({},h),l;case B:var f=Object(x.a)({},e);return f.shifts=Object(x.a)({},e.shifts),f.shifts[t.payload.subject]=t.payload.shifts,f;case G:var O=Object(x.a)({},e),m=Object(x.a)({},e.classes);return m[t.payload.subject]?m[t.payload.subject].count++:(m[t.payload.subject]={},m[t.payload.subject].count=1),m[t.payload.subject][t.payload.type]||(m[t.payload.subject][t.payload.type]={}),m[t.payload.subject][t.payload.type][t.payload.number]=Object(x.a)({},e.shifts[t.payload.subject][t.payload.type][t.payload.number]),O.classes=m,O;case U:var v=Object(x.a)({},e),y=Object(x.a)({},e.classes);return y[t.payload.subject].count--,delete y[t.payload.subject][t.payload.type][t.payload.number],0==y[t.payload.subject].count&&delete y[t.payload.subject],v.classes=y,v;case z:var g=Object(x.a)({},e);return g.view=t.payload,g;default:var w=Object(x.a)({},e);return w.loading=!1,w}})),Q=function(){return{type:A}},X=function(e,t){return{type:F,payload:{name:e,content:t}}},K=function(e){return{type:_,payload:e}},W=function(e){return{type:D,payload:e}},Z=function(){return{type:I}},$=function(e){return{type:T,payload:e}},ee=function(e){return{type:E,payload:e}},te=function(e){return{type:M,payload:e}},ne=function(e){return{type:P,payload:e}},re=function(e){return{type:q,payload:e}},ae=function(e){return{type:Y,payload:e}},ce=function(e,t){return{type:B,payload:{subject:e,shifts:t}}},se=function(e,t,n){return{type:G,payload:{subject:e,type:t,number:n}}},ie=function(e,t,n){return{type:U,payload:{subject:e,type:t,number:n}}},ue=function(e){return{type:z,payload:e}},oe=function(){return{type:H}};function de(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)(A,h.a.mark((function e(){var t,n,r,a,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=(new Date).getFullYear(),n=(new Date).getMonth()+1,r=(new Date).getDay(),c={all:[],chosen:(a=n>=8?t+1:t)+"-"+(n>=8?2:n+""+r<="215"?5:3)},s=a;s>=2015;s--)c.all.push({year:s,times:[{id:2,name:"1\xba Semestre"},{id:5,name:"Trimestre"},{id:3,name:"2\xba Semestre"}]});return e.next=9,Object(f.b)(K(c));case 9:return e.next=11,Object(f.b)(Z());case 11:return e.next=13,Object(f.c)((function(e){return e.redux.classes}));case 13:if(i=e.sent,!Array.isArray(i)){e.next=17;break}return e.next=17,Object(f.b)(X("classes",{}));case 17:return e.next=19,Object(f.c)((function(e){return e.redux.view}));case 19:if("chosen"==e.sent){e.next=23;break}return e.next=23,Object(f.b)(X("view",void 0));case 23:case"end":return e.stop()}}),e)})));case 2:return e.next=4,Object(f.d)(I,h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get(g.departments());case 2:return t=e.sent,n=t.data,e.next=6,Object(f.b)($(n));case 6:case"end":return e.stop()}}),e)})));case 4:return e.next=6,Object(f.d)(E,h.a.mark((function e(t){var n,r,a,c,s,i,u,o,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,e.next=3,Object(f.c)((function(e){return e.redux.year.chosen}));case 3:return r=e.sent,a=r.split("-")[0],c=r.split("-")[1],s={},e.next=9,w(n);case 9:return i=e.sent,i.data.classes.map((function(e){s[e.id]=e.name})),e.next=14,k(n,a);case 14:return u=e.sent,o=u.data,d=[],o.map((function(e){e.period!=c&&1!=e.period||d.push({id:e.parent,name:s[e.parent]})})),d.sort((function(e,t){return e.name>t.name})),e.next=21,Object(f.b)(te(d));case 21:case"end":return e.stop()}}),e)})));case 6:return e.next=8,Object(f.d)(D,h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,e.next=3,Object(f.c)((function(e){return e.redux.subject.chosen}));case 3:return n=e.sent,e.next=6,Object(f.b)(ne(Object.keys(n)));case 6:case"end":return e.stop()}}),e)})));case 8:return e.next=10,Object(f.d)(P,h.a.mark((function e(t){var n,r,a,c,s,i,u,o,d,b,j,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.payload,r=0;case 2:if(!((a=Array.isArray(n)?n[r++]:n)>0)){e.next=23;break}return e.next=6,S(a);case 6:return c=e.sent,s=c.data,i=s,u=s.instances,e.next=12,Object(f.c)((function(e){return e.redux.year.chosen}));case 12:for(o=e.sent,d=o.split("-")[0],b=!1,j=void 0,l=0;!b&&l<u.length;l++)u[l].year==d&&(j=u[l].id,b=!0);if(!j){e.next=21;break}return e.delegateYield(h.a.mark((function e(){var t,n,r,c,s,u,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(re(i));case 2:return(t=Object(x.a)({},i)).credits=t.credits/2,delete t.instances,delete t.url,e.next=8,C(j);case 8:return n=e.sent,r=n.data,c=r,s={t:{},to:{},tp:{},tpo:{},p:{},po:{}},e.next=14,w(t.department.id);case 14:return u=e.sent,o=u.data.building.abbreviation,c.map((function(e){var n=Object(x.a)({},e);delete n.teachers,delete n.url;for(var r=0;r<n.instances.length;r++)n.instances[r].duration=n.instances[r].duration/30,n.instances[r].room=n.instances[r].room?o+" "+n.instances[r].room:void 0;n.type={name:R.classesTypes(e.type),title:e.type_display},delete n.type_display,s[n.type.name][e.number]={subject:t,shift:n}})),e.next=19,Object(f.b)(ce(a,s));case 19:case"end":return e.stop()}}),e)}))(),"t0",19);case 19:e.next=23;break;case 21:return e.next=23,Object(f.b)(ae(a));case 23:if(Array.isArray(n)&&r<=n.length){e.next=2;break}case 24:return e.next=26,Object(f.b)(oe());case 26:case"end":return e.stop()}}),e)})));case 10:case"end":return e.stop()}}),N)}var be=h.a.mark(le),je=Object(O.c)({redux:J});function le(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([de()]);case 2:case"end":return e.stop()}}),be)}var pe=Object(b.a)(),he=[].concat(Object(o.a)(Object(d.b)({immutableCheck:!1,serializableCheck:!1,thunk:!0})),[pe]),fe=Object(d.a)({reducer:je,middleware:he,devTools:!1,enhancers:[j.reduxBatch]}),Oe=Object(l.b)(fe);pe.run(le);var xe=fe,me=n(9),ve=n(45),ye=(n(80),n(81),n(0)),ge=function(e){var t=e.name,n=e.logo,r=e.years,a=e.year,c=e.departments,s=e.department,i=e.subjects,u=e.subject,o=Object(me.b)(),d=Object(me.c)((function(e){return e.redux.view})),b=function(e){o(W(e))},j=function(e){o(ue(e))},l=Object.values(u).sort((function(e,t){return e.abbreviation>t.abbreviation}));return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsxs)("div",{id:"topMenu",children:[Object(ye.jsxs)("span",{children:[Object(ye.jsx)("img",{src:n}),Object(ye.jsx)("h1",{children:t})]}),Object(ye.jsxs)("span",{children:[Object(ye.jsxs)("select",{value:a,onChange:function(e){return b(e.target.value)},children:[Object(ye.jsx)("option",{disabled:!0,selected:!0,children:"Escolher Per\xedodo Letivo"}),r.map((function(e){return Object(ye.jsx)("optgroup",{label:e.year,children:e.times.map((function(t){return Object(ye.jsx)("option",{value:e.year+"-"+t.id,children:t.name})}))})}))]}),Object(ye.jsxs)("select",{value:s,onChange:function(e){return function(e){o(ee(e))}(e.target.value)},children:[Object(ye.jsx)("option",{disabled:!0,selected:!0,children:"Escolher Departamento"}),c.map((function(e){return Object(ye.jsx)("option",{value:e.id,children:e.name})}))]}),Object(ye.jsxs)("select",{onChange:function(e){return function(e){o(ne(e))}(e.target.value)},children:[Object(ye.jsx)("option",{value:-1,selected:!0,children:"Adicionar Cadeira"}),i.map((function(e){return u[e.id]?Object(ye.jsx)(ye.Fragment,{}):Object(ye.jsx)("option",{value:e.id,children:e.name})}))]})]})]}),Object(ye.jsxs)("div",{id:"subTopMenu",children:[Object(ye.jsx)("div",{id:"subjects",children:l.map((function(e){return Object(ye.jsxs)("div",{title:e.name,children:[e.abbreviation,Object(ye.jsx)("span",{onClick:function(){return function(e){o(ae(e))}(e.id)},children:"X"})]})}))}),Object(ye.jsxs)("div",{id:"menu",children:[Object(ye.jsx)("div",{className:"option",id:"update",onClick:function(){return b(a)},children:Object(ye.jsx)("span",{children:"\u21ba Atualizar"})}),Object(ye.jsxs)("div",{id:"view",children:[Object(ye.jsx)("span",{className:void 0==d?"active":"",onClick:function(){return j(void 0)},children:"Escolher"}),Object(ye.jsx)("span",{className:"chosen"==d?"active":"",onClick:function(){return j("chosen")},children:"Escolhido"})]})]})]})]})},we=function(){var e=Object(me.c)((function(e){return e.redux.year.all})),t=Object(me.c)((function(e){return e.redux.year.chosen})),n=Object(me.c)((function(e){return e.redux.department.all})),r=Object(me.c)((function(e){return e.redux.department.chosen})),a=Object(me.c)((function(e){return e.redux.subject.all})),c=Object(me.c)((function(e){return e.redux.subject.chosen}));return Object(ye.jsx)(ge,{name:R.name,logo:R.logo,years:e,year:t,departments:n,department:r,subjects:a,subject:c})},ke=(n(83),n(28)),Se=n.n(ke),Ce=(n(84),function(e){for(var t=e.times,n=[],r=0;r<t-1;r++)n.push(1);return Object(ye.jsxs)(ye.Fragment,{children:[n.map((function(e){return Object(ye.jsx)("td",{})})),Object(ye.jsx)("td",{className:"with-right-border"})]})}),Re=function(e){var t=e.maxClasses,n=e.hours,r=e.classes,a=e.filled,c=e.chosenClasses,s=Object(me.b)(),i=function(e,t,n){c[e]&&c[e][t]&&c[e][t][n]?s(ie(e,t,n)):s(se(e,t,n))};return Object(ye.jsx)(ye.Fragment,{children:Object(ye.jsxs)("table",{id:"timetable",className:"timetable",children:[Object(ye.jsx)("thead",{children:Object(ye.jsxs)("tr",{children:[Object(ye.jsx)("th",{children:"Hora"}),Object(ye.jsx)("th",{colSpan:t[0],children:"2\xaa"}),Object(ye.jsx)("th",{colSpan:t[1],children:"3\xaa"}),Object(ye.jsx)("th",{colSpan:t[2],children:"4\xaa"}),Object(ye.jsx)("th",{colSpan:t[3],children:"5\xaa"}),Object(ye.jsx)("th",{colSpan:t[4],children:"6\xaa"})]})}),Object(ye.jsx)("tbody",{children:n.map((function(e){return Object(ye.jsxs)("tr",{children:[Object(ye.jsxs)("td",{children:[-1==(e/60).toString().indexOf(".5")?parseInt(e/60)<10?"0"+parseInt(e/60):parseInt(e/60):parseInt(e/60)+1<10?"0"+(parseInt(e/60)+1):parseInt(e/60)+1,":00"]}),[0,1,2,3,4].map((function(s){return Object(ye.jsxs)(ye.Fragment,{children:[a[n.indexOf(e)][s]?r[n.indexOf(e)][s].sort((function(e,t){return e.subject.abbreviation!=t.subject.abbreviation?e.subject.abbreviation>t.subject.abbreviation:e.shift.number>t.shift.number})).map((function(e){return Object(ye.jsxs)("td",{rowSpan:e.shift.duration,className:"class ".concat(e.shift.type.name," ").concat(e.subject.id,"-").concat(e.shift.type.name,"-").concat(e.shift.number),onMouseOver:function(){return t=e.subject.id+"-"+e.shift.type.name+"-"+e.shift.number,void Se()("."+t).addClass("hover");var t},onMouseLeave:function(){return t=e.subject.id+"-"+e.shift.type.name+"-"+e.shift.number,void Se()("."+t).removeClass("hover");var t},children:[c[e.subject.id]&&c[e.subject.id][e.shift.type.name]&&c[e.subject.id][e.shift.type.name.toLowerCase()][e.shift.number]?Object(ye.jsx)("div",{className:"save",title:"Remover",onClick:function(){return i(e.subject.id,e.shift.type.name,e.shift.number)},children:"\u2715"}):Object(ye.jsx)("div",{className:"save",title:"Guardar",onClick:function(){return i(e.subject.id,e.shift.type.name,e.shift.number)},children:"\u2605"}),Object(ye.jsx)("h3",{children:Object(ye.jsx)("span",{title:e.subject.name,children:e.subject.abbreviation})}),Object(ye.jsxs)("p",{children:[Object(ye.jsxs)("span",{title:e.shift.type.title+" "+e.shift.number,children:[e.shift.type.name.toUpperCase()," ",e.shift.number]}),Object(ye.jsx)("br",{}),e.shift.room]})]})})):Object(ye.jsx)(Ce,{times:t[s]-a[n.indexOf(e)][s]}),t[s]>a[n.indexOf(e)][s]&&a[n.indexOf(e)][s]?Object(ye.jsx)(Ce,{times:t[s]-a[n.indexOf(e)][s]}):Object(ye.jsx)(ye.Fragment,{})]})}))]})}))})]})})},Ne=function(){for(var e=Object(me.c)((function(e){return e.redux.shifts})),t=Object(me.c)((function(e){return e.redux.classes})),n=Object(me.c)((function(e){return e.redux.view})),r=[],a=8;a<=23.5;a+=.5)r.push(60*a);var c=[],s=[];r.map((function(){var e=[],t=[];[1,2,3,4,5].map((function(){e.push([]),t.push(0)})),c.push(e),s.push(t)}));var i=[1,1,1,1,1],u="chosen"==n?t:e;return Object.keys(u).map((function(e){Object.keys(u[e]).map((function(t){Object.keys(u[e][t]).map((function(n){var a=u[e][t][n];a.shift.instances.map((function(e){c[r.indexOf(e.start)][e.weekday].push({subject:a.subject,shift:Object(x.a)(Object(x.a)({},e),{},{number:a.shift.number,type:a.shift.type})});for(var t=r.indexOf(e.start);t<r.indexOf(e.start)+e.duration;t++)s[t][e.weekday]++,i[e.weekday]=Math.max(i[e.weekday],s[t][e.weekday])}))}))}))})),Object(ye.jsx)("div",{id:"content",children:Object(ye.jsx)(Re,{maxClasses:i,hours:r,classes:c,filled:s,chosenClasses:t})})},Ae=(n(85),function(){return Object(ye.jsx)("div",{className:"loaderContainer",children:Object(ye.jsx)("div",{className:"loader"})})}),Fe=(n(86),n(19)),_e=function(){return Object(ye.jsxs)("div",{id:"footer",children:[Object(ye.jsx)("img",{id:"logo",src:"/logo.png"}),Object(ye.jsx)("div",{id:"menu",children:Object(ye.jsxs)(Fe.b,{to:"/about",className:"option",children:[Object(ye.jsx)("ion-icon",{name:"information-circle"}),"Sobre"]})})]})},De=function(){return Object(ye.jsx)(_e,{})},Ie=n(31),Te=function(){Ie.a.initialize("UA-190799873-1"),Ie.a.pageview(window.location.pathname+window.location.search);var e=Object(me.b)(),t=Object(me.c)((function(e){return e.redux.loading}));return Object(r.useEffect)((function(){e(Q())}),[]),Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)(we,{}),Object(ye.jsx)(Ne,{}),Object(ye.jsx)(De,{}),t?Object(ye.jsx)(Ae,{}):Object(ye.jsx)(ye.Fragment,{})]})},Ee=(n(88),n(8)),Le=(n(89),function(){return Object(ye.jsx)("div",{id:"about",children:Object(ye.jsxs)("div",{id:"content",children:[Object(ye.jsxs)("div",{className:"header",children:[Object(ye.jsx)("h2",{children:"Sobre"}),Object(ye.jsx)(Fe.b,{id:"close",to:"/",children:"\u2715"})]}),Object(ye.jsxs)("div",{className:"content",children:[Object(ye.jsx)("h4",{children:"Objetivo"}),"Permitir a simula\xe7\xe3o de hor\xe1rios da ",Object(ye.jsx)("a",{href:"https://www.fct.unl.pt/",target:"_blank",children:"NOVA School of Science and Technology | FCT NOVA"}),".",Object(ye.jsx)("h4",{children:"Contribuir"}),"Quaisquer sugest\xf5es de melhoria s\xe3o sempre bem vindas!",Object(ye.jsx)("br",{}),"O c\xf3digo que permite p\xf4r esta plataforma em funcionamento est\xe1 dispon\xedvel ",Object(ye.jsx)("a",{href:"https://github.com/4lexcorrei4/simulador_horarios",target:"_blank",children:"aqui"}),".",Object(ye.jsx)("br",{}),"Podes contribuir e ajudar sempre que quiseres, sempre segundo a licensa ",Object(ye.jsx)("a",{href:"https://github.com/4lexcorrei4/simulador_horarios/blob/master/LICENSE",target:"_blank",children:"GPLv3"}),".",Object(ye.jsx)("h4",{children:"Contacto"}),"Para me contactares basta enviares mensagem por uma das redes sociais dispon\xedveis ",Object(ye.jsx)("a",{href:"https://bitsys.tech/",target:"_blank",children:"aqui"}),".",Object(ye.jsx)("h4",{children:"Desenvolvedor"}),Object(ye.jsx)("a",{href:"https://bitsys.tech/",target:"_blank",children:"Alexandre Correia"}),Object(ye.jsx)("h4",{children:"Cr\xe9ditos"}),"Frameworks e servi\xe7os usados:",Object(ye.jsxs)("ul",{children:[Object(ye.jsxs)("li",{children:[Object(ye.jsx)("a",{href:"https://reactjs.org/",target:"_blank",children:"React"}),": Front-end"]}),Object(ye.jsxs)("li",{children:[Object(ye.jsx)("a",{href:"https://supernova.nunl.pt/",target:"_blank",children:"Supernova"}),": Acesso aos conte\xfados"]})]})]})]})})});var Me=function(){return u.a,Object(ye.jsx)(me.a,{store:xe,children:Object(ye.jsx)(ve.a,{persistor:Oe,loading:null,children:Object(ye.jsxs)(Fe.a,{children:[Object(ye.jsx)(Te,{}),Object(ye.jsx)(Ee.c,{children:Object(ye.jsx)(Ee.a,{path:"/about",children:Object(ye.jsx)(Le,{})})})]})})})},Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(ye.jsx)(a.a.StrictMode,{children:Object(ye.jsx)(Me,{})}),document.getElementById("root")),Pe()}},[[90,1,2]]]);
//# sourceMappingURL=main.d01c3c7b.chunk.js.map